<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Grid Ayarlı Blok Oyunu</title>
  <style>
    body {
      margin: 0;
      background: #111;
      color: white;
      font-family: sans-serif;
    }

    .toolbar {
      position: absolute;
      top: 10px;
      left: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: #222;
      padding: 8px 12px;
      border-radius: 10px;
      z-index: 10;
    }

    .toolbar button {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 4px;
      border-radius: 6px;
      transition: background 0.2s;
      color: white;
      font-size: 18px;
      user-select: none;
    }

    .toolbar button:hover {
      background: #333;
    }

    .toolbar svg {
      width: 24px;
      height: 24px;
      fill: #fff;
    }

    .toolbar input {
      width: 50px;
      background: #000;
      border: 1px solid #555;
      color: white;
      padding: 4px;
      border-radius: 4px;
      text-align: center;
      user-select: none;
    }

    #container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      height: 100vh;
      padding-top: 60px;
      gap: 20px;
      box-sizing: border-box;
    }

    .grid-wrapper {
      position: relative;
      border-radius: 8px;
      background-image: linear-gradient(135deg, #03b1fc, #0540e3);
    }

    .grid {
      display: grid;
      user-select: none;
      border: 2px solid #444;
      border-radius: 8px;
      position: relative;
      z-index: 2;
      background-color: transparent;
    }

    .cell {
      width: 40px;
      height: 40px;
      background-color: transparent;
      background-size: cover;
      background-position: center;
      box-sizing: border-box;
      cursor: pointer;
      transition: outline 0.15s;
    }

    .cell:hover {
      outline: 1px solid #666;
    }

    #catalog {
      background: #222;
      padding: 15px;
      border-radius: 10px;
      width: auto;
      color: white;
      user-select: none;
      font-family: sans-serif;
      text-align: center;
    }

    #catalog h3 {
      display: none; /* Başlığı gizledim */
    }

    #catalog .blocks-row {
      display: flex;
      gap: 0; /* Boşluk sıfırlandı */
      justify-content: center;
      margin-top: 10px;
      margin-bottom: 0;
      flex-wrap: nowrap; /* Satır kaymasına izin verme */
    }

    .block-option {
      width: 40px;
      height: 40px;
      border: 2px solid transparent;
      border-radius: 8px;
      cursor: pointer;
      transition: border-color 0.25s ease, filter 0.25s ease;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .block-option img {
      width: 36px;
      height: 36px;
      pointer-events: none;
      user-select: none;
    }

    .block-option:hover {
      filter: brightness(1.2);
    }

    .block-option.selected {
      border-color: #4caf50;
      filter: brightness(1.3);
    }
  </style>
</head>
<body>
  <div class="toolbar">
    <button id="clearBtn" title="çöp kutusu">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
        <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
      </svg>
    </button>
    <input type="number" id="gridSizeInput" min="1" max="50" value="15" />
  </div>

  <div id="container">
    <div class="grid-wrapper" id="grid-wrapper">
      <div class="grid" id="grid"></div>
    </div>

    <div id="catalog">
      <div class="blocks-row">
        <div class="block-option selected" data-type="grass" title="Grass Block">
          <img src="https://i.ibb.co/7tpJP1Xh/paint.png" alt="Grass Block" />
        </div>
        <div class="block-option" data-type="dirt" title="Dirt Block">
          <img src="https://i.ibb.co/MkkShhzj/dirt.png" alt="Dirt Block" />
        </div>
        <div class="block-option" data-type="oaklog" title="Oak Log">
          <img src="https://i.ibb.co/sJ9Mt3Lc/oaklog.png" alt="Oak Log" />
        </div>
        <div class="block-option" data-type="oakleaves" title="Oak Leaves">
          <img src="https://i.ibb.co/2YNsbz9d/oakleaves.png" alt="Oak Leaves" />
        </div>
        <div class="block-option" data-type="stone" title="Stone Block">
          <img src="https://i.ibb.co/v4pLKsgc/stone.png" alt="Stone Block" />
        </div>
        <div class="block-option" data-type="coal" title="Coal Ore">
          <img src="https://i.ibb.co/8nbyqwdv/coal.png" alt="Coal Ore" />
        </div>
        <div class="block-option" data-type="iron" title="Iron Ore">
          <img src="https://i.ibb.co/QFnvpJwy/iron.png" alt="Iron Ore" />
        </div>
      </div>
    </div>
  </div>

  <script>
    const GRASS_BLOCK = 'https://i.ibb.co/7tpJP1Xh/paint.png';
    const DIRT_BLOCK = 'https://i.ibb.co/MkkShhzj/dirt.png';
    const OAKLOG_BLOCK = 'https://i.ibb.co/sJ9Mt3Lc/oaklog.png';
    const OAKLEAVES_BLOCK = 'https://i.ibb.co/2YNsbz9d/oakleaves.png';
    const STONE_BLOCK = 'https://i.ibb.co/v4pLKsgc/stone.png';
    const COAL_BLOCK = 'https://i.ibb.co/8nbyqwdv/coal.png';
    const IRON_BLOCK = 'https://i.ibb.co/QFnvpJwy/iron.png';

    const gridEl = document.getElementById('grid');
    const gridWrapper = document.getElementById('grid-wrapper');
    const clearBtn = document.getElementById('clearBtn');
    const gridSizeInput = document.getElementById('gridSizeInput');

    const blockOptions = document.querySelectorAll('.block-option');

    let ROWS = 15, COLS = 15;
    let cells = [];

    let selectedBlock = 'grass';

    function getCell(row, col) {
      if (row < 0 || row >= ROWS || col < 0 || col >= COLS) return null;
      return cells[row * COLS + col];
    }

    function setBlock(cell, type) {
      if (!cell) return;
      if (type === 'empty') {
        cell.style.backgroundImage = '';
        cell.dataset.state = 'empty';
      } else if (type === 'grass') {
        cell.style.backgroundImage = `url('${GRASS_BLOCK}')`;
        cell.dataset.state = 'grass';
      } else if (type === 'dirt') {
        cell.style.backgroundImage = `url('${DIRT_BLOCK}')`;
        cell.dataset.state = 'dirt';
      } else if (type === 'oaklog') {
        cell.style.backgroundImage = `url('${OAKLOG_BLOCK}')`;
        cell.dataset.state = 'oaklog';
      } else if (type === 'oakleaves') {
        cell.style.backgroundImage = `url('${OAKLEAVES_BLOCK}')`;
        cell.dataset.state = 'oakleaves';
      } else if (type === 'stone') {
        cell.style.backgroundImage = `url('${STONE_BLOCK}')`;
        cell.dataset.state = 'stone';
      } else if (type === 'coal') {
        cell.style.backgroundImage = `url('${COAL_BLOCK}')`;
        cell.dataset.state = 'coal';
      } else if (type === 'iron') {
        cell.style.backgroundImage = `url('${IRON_BLOCK}')`;
        cell.dataset.state = 'iron';
      }
    }

    function updateDirt() {
      for (let r = 0; r < ROWS; r++) {
        for (let c = 0; c < COLS; c++) {
          const current = getCell(r, c);
          const above = getCell(r - 1, c);

          if (current && current.dataset.state === 'grass') {
            if (above && (above.dataset.state === 'grass' || above.dataset.state === 'dirt')) {
              setBlock(current, 'dirt');
            }
          }
        }
      }
    }

    function createGrid(rows, cols) {
      ROWS = rows;
      COLS = cols;
      gridEl.innerHTML = '';
      gridEl.style.gridTemplateColumns = `repeat(${COLS}, 40px)`;
      gridEl.style.gridTemplateRows = `repeat(${ROWS}, 40px)`;
      cells = [];

      for (let r = 0; r < ROWS; r++) {
        for (let c = 0; c < COLS; c++) {
          const cell = document.createElement('div');
          cell.classList.add('cell');
          cell.dataset.state = 'empty';
          cell.dataset.row = r;
          cell.dataset.col = c;
          gridEl.appendChild(cell);
          cells.push(cell);
        }
      }

      gridWrapper.style.width = `${COLS * 40}px`;
      gridWrapper.style.height = `${ROWS * 40}px`;
    }

    blockOptions.forEach(opt => {
      opt.addEventListener('click', () => {
        blockOptions.forEach(o => o.classList.remove('selected'));
        opt.classList.add('selected');
        selectedBlock = opt.dataset.type;
      });
    });

    let isMouseDown = false;

    gridEl.addEventListener('mousedown', (e) => {
      if (!e.target.classList.contains('cell')) return;
      isMouseDown = true;
      const cell = e.target;
      if (e.shiftKey) {
        setBlock(cell, 'empty');
      } else {
        setBlock(cell, selectedBlock);
      }
      updateDirt();
      e.preventDefault();
    });

    gridEl.addEventListener('mousemove', (e) => {
      if (!isMouseDown) return;
      if (!e.target.classList.contains('cell')) return;
      const cell = e.target;
      if (e.shiftKey) {
        setBlock(cell, 'empty');
      } else {
        setBlock(cell, selectedBlock);
      }
      updateDirt();
    });

    window.addEventListener('mouseup', () => {
      isMouseDown = false;
    });

    clearBtn.addEventListener('click', () => {
      for (const cell of cells) {
        setBlock(cell, 'empty');
      }
    });

    gridSizeInput.addEventListener('input', () => {
      const newSize = parseInt(gridSizeInput.value);
      if (!isNaN(newSize) && newSize > 0 && newSize <= 50) {
        createGrid(newSize, newSize);
      }
    });

    createGrid(ROWS, COLS);
  </script>
</body>
</html>
